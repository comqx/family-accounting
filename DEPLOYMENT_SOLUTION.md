# å®¶è´¦é€šå°ç¨‹åºéƒ¨ç½²è§£å†³æ–¹æ¡ˆ

## ğŸ¯ é—®é¢˜è§£å†³

æœ¬è§£å†³æ–¹æ¡ˆä¸“é—¨è§£å†³éƒ¨ç½²å¹³å°ç”Ÿå‘½å‘¨æœŸé’©å­å…¼å®¹æ€§é—®é¢˜ï¼š
- âœ… è§£å†³ `/bin/sh /app/cert/initenv.sh` ç”Ÿå‘½å‘¨æœŸé’©å­æ‰§è¡Œå¤±è´¥
- âœ… ç»Ÿä¸€ä½¿ç”¨80ç«¯å£
- âœ… å®¹å™¨å¯åŠ¨ç¨³å®šæ€§ä¼˜åŒ–
- âœ… åŒ…å«å¥åº·æ£€æŸ¥æœºåˆ¶

## ğŸ“¦ é•œåƒç‰ˆæœ¬

### æ¨èä½¿ç”¨ï¼š`family-accounting:final`

**ç‰¹æ€§ï¼š**
- ğŸ”§ åŒ…å«å…¼å®¹æ€§åˆå§‹åŒ–è„šæœ¬ï¼š`/app/cert/initenv.sh`
- ğŸŒ æœåŠ¡è¿è¡Œåœ¨æ ‡å‡†HTTPç«¯å£ï¼š80
- ğŸ¥ å†…ç½®å¥åº·æ£€æŸ¥
- ğŸ“¦ åŸºäºNode.js 24-slimï¼Œä½“ç§¯ä¼˜åŒ–
- ğŸš€ ä½¿ç”¨http-serveræä¾›é™æ€æ–‡ä»¶æœåŠ¡

## ğŸš€ éƒ¨ç½²æ–¹æ³•

### æ–¹æ³•1ï¼šç›´æ¥ä½¿ç”¨Dockeré•œåƒ

```bash
# æ„å»ºé•œåƒ
docker build -f Dockerfile.simple -t family-accounting:final .

# è¿è¡Œå®¹å™¨ï¼ˆæœ¬åœ°æµ‹è¯•ï¼‰
docker run -d -p 8080:80 --name family-accounting family-accounting:final

# æ¨é€åˆ°å®¹å™¨æ³¨å†Œè¡¨
docker tag family-accounting:final your-registry/family-accounting:latest
docker push your-registry/family-accounting:latest
```

### æ–¹æ³•2ï¼šä½¿ç”¨Docker Compose

```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f family-accounting-app
```

## ğŸ”§ é…ç½®è¯¦æƒ…

### ç«¯å£é…ç½®
- **å®¹å™¨å†…ç«¯å£**: 80
- **æœåŠ¡åè®®**: HTTP
- **å¥åº·æ£€æŸ¥**: `http://localhost:80/`

### ç”Ÿå‘½å‘¨æœŸé’©å­
- **è„šæœ¬è·¯å¾„**: `/app/cert/initenv.sh`
- **æ‰§è¡Œå‘½ä»¤**: `/bin/sh /app/cert/initenv.sh`
- **åŠŸèƒ½**: è¾“å‡ºåˆå§‹åŒ–å®Œæˆä¿¡æ¯å¹¶æ­£å¸¸é€€å‡º

### æ–‡ä»¶ç»“æ„
```
/app/
â”œâ”€â”€ cert/
â”‚   â””â”€â”€ initenv.sh          # å…¼å®¹æ€§åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ dist/                   # æ„å»ºäº§ç‰©
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ app.json
â”‚   â”œâ”€â”€ app.wxss
â”‚   â””â”€â”€ ...
â””â”€â”€ node_modules/           # ä¾èµ–åŒ…
```

## âœ… éªŒè¯æ–¹æ³•

### 1. éªŒè¯å…¼å®¹æ€§è„šæœ¬
```bash
docker run --rm family-accounting:final /bin/sh /app/cert/initenv.sh
```
**é¢„æœŸè¾“å‡º:**
```
ğŸ”§ åˆå§‹åŒ–ç¯å¢ƒè„šæœ¬æ‰§è¡Œå®Œæˆ
âœ… å®¶è´¦é€šå°ç¨‹åºç¯å¢ƒå‡†å¤‡å°±ç»ª
```

### 2. éªŒè¯æœåŠ¡å¯åŠ¨
```bash
docker run --rm -p 8080:80 family-accounting:final
```
**é¢„æœŸè¾“å‡º:**
```
Starting up http-server, serving dist
Available on:
  http://127.0.0.1:80
```

### 3. éªŒè¯å¥åº·æ£€æŸ¥
```bash
curl http://localhost:8080/
```

## ğŸ” æ•…éšœæ’é™¤

### å¦‚æœå®¹å™¨ä»ç„¶å¯åŠ¨å¤±è´¥ï¼š

1. **æ£€æŸ¥èµ„æºé™åˆ¶**
   - ç¡®ä¿å®¹å™¨æœ‰è¶³å¤Ÿçš„CPUå’Œå†…å­˜
   - å»ºè®®æœ€å°é…ç½®ï¼šCPU 0.5æ ¸ï¼Œå†…å­˜ 512MB

2. **æ£€æŸ¥éƒ¨ç½²å¹³å°é…ç½®**
   - ç¡®è®¤ç”Ÿå‘½å‘¨æœŸé’©å­è·¯å¾„ï¼š`/bin/sh /app/cert/initenv.sh`
   - ç¡®è®¤ç«¯å£æ˜ å°„ï¼šå®¹å™¨ç«¯å£80

3. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**
   ```bash
   docker logs container-name
   ```

4. **è¿›å…¥å®¹å™¨è°ƒè¯•**
   ```bash
   docker exec -it container-name sh
   ls -la /app/cert/
   /bin/sh /app/cert/initenv.sh
   ```

## ğŸ“‹ éƒ¨ç½²æ¸…å•

- [ ] æ„å»ºé•œåƒï¼š`family-accounting:final`
- [ ] æ¨é€åˆ°å®¹å™¨æ³¨å†Œè¡¨
- [ ] æ›´æ–°éƒ¨ç½²é…ç½®ä½¿ç”¨æ–°é•œåƒ
- [ ] ç¡®è®¤ç«¯å£é…ç½®ï¼š80
- [ ] ç¡®è®¤ç”Ÿå‘½å‘¨æœŸé’©å­ï¼š`/bin/sh /app/cert/initenv.sh`
- [ ] éªŒè¯å®¹å™¨å¯åŠ¨æˆåŠŸ
- [ ] éªŒè¯æœåŠ¡å¯è®¿é—®

## ğŸ‰ é¢„æœŸç»“æœ

éƒ¨ç½²æˆåŠŸåï¼š
- âœ… å®¹å™¨æ­£å¸¸å¯åŠ¨ï¼Œæ— é‡å¯å¾ªç¯
- âœ… ç”Ÿå‘½å‘¨æœŸé’©å­æˆåŠŸæ‰§è¡Œ
- âœ… æœåŠ¡åœ¨80ç«¯å£æ­£å¸¸æä¾›æœåŠ¡
- âœ… å¥åº·æ£€æŸ¥é€šè¿‡
- âœ… å°ç¨‹åºé™æ€èµ„æºæ­£å¸¸è®¿é—®
